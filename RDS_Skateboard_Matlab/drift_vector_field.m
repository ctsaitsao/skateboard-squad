%% drift_vector_field.m
%
% Description:
%   Wrapper function for autogen_drift_vector_field.m
%   Computes the drift vector field for the nonlinear state-space
%   dynamics of the cart-pendulum robot.
%
% Inputs:
%   x: the state vector, x = [x_cart; theta_pend; dx_cart; dtheta_pend];
%   params: a struct with many elements, generated by calling init_params.m
%
% Outputs:
%   f_ss: a 4x1 vector that maps state x to dx (time derivative of
%       the state x) when control input u = 0.

function f_ss = drift_vector_field(x,params)

% Note: x_cart does not appear in the drift vector field


theta_pend = x(2);
dx_cart = x(3);
dtheta_pend = x(4);

%input arguments:
% boardI,boardDX,boardDY,boardMass,boardTheta,boardDTheta,bottomLinkI,
% bottomLinkRCoM,bottomLinkMass,bottomLinkTheta,
% bottomLinkDTheta,bottomLinkHeight,
% g,topLinkI,topLinkRCoM,topLinkMass,
% topLinkTheta,topLinkDTheta

f_ss = autogen_drift_vector_field(params.boardI,...
                                  x(6),...
                                  x(7),...
                                  params.boardMass,...
                                  x(3),...
                                  x(8),...
                                  params.bottomLinkI,...
                                  params.bottomLinkYCoM,...
                                  params.bottomLinkMass,...
                                  x(4),...
                                  x(9),...
                                  params.bottomLinkHeight,...
                                  params.g,...
                                  params.topLinkI,...
                                  params.topLinkYCoM,...
                                  params.topLinkMass,...
                                  x(5),...
                                  x(10));
end